<section class="panel">
    <div class="panel-header">
        <div>
            <h2 class="panel-title">Filters</h2>
            <p class="panel-subtitle">Pick a window or review everything. Pagination always applies.</p>
        </div>
        <div id="scope-indicator" class="scope-indicator">
            {% if scope == "all" %}All history{% else %}Date range{% endif %}
        </div>
    </div>

    <form id="filter-form" action="/" method="get" class="filter-form">
        <div class="filter-grid">
            <div class="field-group">
                <label class="field-label">Filter scope</label>
                <div class="mode-toggle">
                    <input type="checkbox" id="scope-all-toggle" name="scope" value="all" {% if scope == "all" %}checked{% endif %}>
                    <label class="mode-track" for="scope-all-toggle">
                        <span class="mode-option mode-range">Date range</span>
                        <span class="mode-option mode-all">All history</span>
                        <span class="mode-thumb"></span>
                    </label>
                </div>
                <div id="scope-strip" class="scope-strip{% if scope == "all" %} is-all{% endif %}">{% if scope == "all" %}Filters off - displaying all transactions{% else %}Filters on - using date range{% endif %}</div>
            </div>

            <div class="field-group{% if scope == "all" %} is-hidden is-disabled{% endif %}" data-filter="date">
                <label class="field-label">Start date</label>
                <input type="date" name="start_date" id="start-date" value="{{ start_date }}" {% if scope == "all" %}disabled{% endif %}>
            </div>

            <div class="field-group{% if scope == "all" %} is-hidden is-disabled{% endif %}" data-filter="date">
                <label class="field-label">End date</label>
                <input type="date" name="end_date" id="end-date" value="{{ end_date }}" {% if scope == "all" %}disabled{% endif %}>
            </div>

            <div class="field-group">
                <label class="field-label">Show categorized</label>
                <div class="toggle-row">
                    <div class="toggle-switch tooltip" data-tooltip="Include already categorized items">
                        <input type="checkbox" name="toggle" id="show-categorized" class="toggle-checkbox" aria-label="Include already categorized items"/>
                        <label for="show-categorized" class="toggle-label"></label>
                    </div>
                </div>
            </div>

            <div class="field-group">
                <label class="field-label">Per page</label>
                <select id="limit-select">
                    <option value="10">10</option>
                    <option value="20">20</option>
                    <option value="50" selected>50</option>
                    <option value="100">100</option>
                    <option value="200">200</option>
                    <option value="500">500</option>
                    <option value="1000">1000</option>
                </select>
            </div>
        </div>

        <div class="actions-row">
            <button type="submit" id="fetch-btn" class="btn btn-primary">{% if scope == "all" %}Fetch all{% else %}Fetch range{% endif %}</button>
            <button type="button" id="categorize-btn" class="btn btn-secondary">Run categorization</button>
        </div>
    </form>
</section>
